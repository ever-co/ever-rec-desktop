@if (video) {
<mat-card class="card" appearance="outlined">
  <div class="video-container p-4">
    <video
      #videoPlayer
      mat-card-image
      [src]="video.pathname"
      alt="Video"
      class="w-full max-w-full h-auto object-cover rounded-md"
      [controls]="controls"
    >
      <source [src]="video.pathname" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
    @if(!controls){
    <div
      class="overlay flex items-end flex-col gap-2 justify-between text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200"
    >
      <button [matMenuTriggerFor]="menu" mat-icon-button>
        <mat-icon>more_vert</mat-icon>
      </button>
      <button (click)="fullscreen()" mat-icon-button>
        <mat-icon>fullscreen</mat-icon>
      </button>
    </div>
    }
  </div>

  @if(!controls){
  <mat-card-content>
    <div class="flex w-full gap-4">
      <button mat-icon-button (click)="togglePlayPause()">
        <mat-icon class="rounded-full">{{
          (played$ | async) ? 'pause' : 'play_arrow'
        }}</mat-icon>
      </button>
      <div class="flex-1 min-w-0">
        @if(video.pathname) {
        <div class="text-lg truncate">
          {{ video.pathname }}
        </div>
        }
        <div class="text-sm text-gray-500 truncate">
          {{ video.createdAt | utcToLocalTime }}
        </div>
      </div>
    </div>
  </mat-card-content>
  }
</mat-card>
<mat-menu #menu="matMenu">
  <button (click)="view(video)" mat-menu-item>
    <mat-icon>visibility</mat-icon>
    <span>View</span>
  </button>
  <button
    class="group flex items-center hover:bg-red-50 transition-colors duration-200"
    (click)="delete(video)"
    mat-menu-item
  >
    <mat-icon
      color="warn"
      class="group-hover:text-red-600 transition-colors duration-200"
      >delete</mat-icon
    >
    <span class="text-sm font-medium text-gray-700 group-hover:text-red-600"
      >Delete</span
    >
  </button>
</mat-menu>
}
