@if (screenshot) {
<mat-card class="card" appearance="outlined">
  <div class="screenshot-container p-4">
    <img
      mat-card-image
      [src]="screenshot.pathname"
      alt="Screenshot"
      class="w-full h-auto object-cover rounded-md"
    />
    <div
      class="overlay flex items-end flex-col gap-2 justify-between text-gray-700 rounded-lg hover:bg-gray-100 transition-colors duration-200"
    >
      <button [matMenuTriggerFor]="menu" mat-icon-button>
        <mat-icon>more_vert</mat-icon>
      </button>
    </div>
  </div>

  <mat-card-content>
    <div class="flex gap-4 w-full items-center">
      @if (screenshot.metadata?.icon) {
      <img
        mat-card-avatar
        [src]="screenshot.metadata?.icon"
        [alt]="screenshot.metadata?.name"
        class="w-10 h-10 rounded-full object-cover"
      />
      }
      <div class="flex-1 min-w-0">
        @if (screenshot.metadata?.name) {
        <div class="text-lg font-medium truncate">
          {{ screenshot.metadata?.name }}
        </div>
        }
        <div class="text-sm text-gray-500 truncate">
          {{ screenshot.createdAt | utcToLocalTime }}
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<!-- Enhanced Menu -->
<mat-menu
  #menu="matMenu"
  class="min-w-[200px]"
  [classList]="'rounded-xl shadow-lg'"
>
  <!-- View Button -->
  <button
    mat-menu-item
    (click)="view()"
    class="group flex items-center hover:bg-blue-50 transition-colors duration-200"
  >
    <mat-icon
      class="text-gray-500 transition-colors duration-200"
    >
      visibility
    </mat-icon>
    <span class="text-sm font-medium text-gray-700">
      View
    </span>
  </button>

  <!-- Delete Button -->
  <button
    mat-menu-item
    (click)="delete(screenshot)"
    class="group flex items-center hover:bg-red-50 transition-colors duration-200"
  >
    <mat-icon
      color="warn"
      class="group-hover:text-red-600 transition-colors duration-200"
    >
      delete
    </mat-icon>
    <span class="text-sm font-medium text-gray-700 group-hover:text-red-600">
      Delete
    </span>
  </button>
</mat-menu>
}
