<div class="setting max-w-xl space-y-6 w-full">
  <p class="text font-bold">
    Current disk used {{ (size$ | async)?.total | humanizeBytes }}
  </p>
  <mat-card appearance="outlined" class="rounded-df p-4">
    <ul class="divide-y divide-gray-300">
      <li class="flex items-center py-3">
        <mat-icon class="text-blue-500 mr-3">image</mat-icon>
        <div class="text-sm text-gray-900">
          Screenshot {{ (size$ | async)?.screenshot | humanizeBytes }}
        </div>
        <lib-action-button
          class="ml-auto"
          [button]="deleteScreenshotsButton"
        ></lib-action-button>
      </li>
      <li class="flex items-center py-3">
        <mat-icon class="text-cyan-500 mr-3">camera</mat-icon>
        <div class="text-sm text-gray-900">
          Photo {{ (size$ | async)?.photo | humanizeBytes }}
        </div>
        <lib-action-button
          class="ml-auto"
          [button]="deletePhotosButton"
        ></lib-action-button>
      </li>
      <li class="flex items-center py-3">
        <mat-icon class="text-red-500 mr-3">movie</mat-icon>
        <div class="text-sm text-gray-900">
          Video {{ (size$ | async)?.video | humanizeBytes }}
        </div>
        <lib-action-button
          class="ml-auto"
          [button]="deleteVideosButton"
        ></lib-action-button>
      </li>
    </ul>
  </mat-card>
  <mat-vertical-stepper animationDuration="1000" [linear]="false" #stepper>
    <mat-step [stepControl]="formGroup">
      <ng-template matStepLabel>Retention Period</ng-template>
      <ng-template matStepContent>
        <form
          [formGroup]="formGroup"
          class="form space-y-4"
          (ngSubmit)="onSubmit()"
        >
          <p class="text-gray-800 font-medium">
            How long do you want to keep your data?
          </p>
          <!-- Select Input -->
          <mat-form-field appearance="outline" class="w-full">
            <mat-label>Retention Period</mat-label>
            <mat-select formControlName="retention" required>
              @for (period of retentionPeriods; track period) {
              <mat-option [value]="period">{{
                period | humanize : 'day' | titlecase
              }}</mat-option>
              }
            </mat-select>
            @if (formGroup.controls['retention'].hasError('required')) {
            <mat-error>Please choose a retention period</mat-error>
            }
          </mat-form-field>

          <!-- Submit and Cancel Buttons -->
          <div class="flex">
            <lib-action-button-group
              class="inline no-bg"
              [buttons]="retentionButtons"
            ></lib-action-button-group>
          </div>
        </form>
      </ng-template>
    </mat-step>
    <!-- Auto Screenshot Deletion -->
    <mat-step>
      <ng-template matStepLabel>Storage Optimization</ng-template>
      <ng-template matStepContent>
        <lib-auto-screenshot-deletion></lib-auto-screenshot-deletion>
      </ng-template>
    </mat-step>
    <!-- Upload Config -->
    <mat-step>
      <ng-template matStepLabel>Upload Configuration</ng-template>
      <ng-template matStepContent>
        <lib-upload-config></lib-upload-config>
      </ng-template>
    </mat-step>
    <!-- AWS Storage -->
    <mat-step>
      <ng-template matStepLabel>AWS S3 Cloud Storage</ng-template>
      <ng-template matStepContent>
        <lib-aws-storage></lib-aws-storage>
      </ng-template>
    </mat-step>
  </mat-vertical-stepper>
</div>
