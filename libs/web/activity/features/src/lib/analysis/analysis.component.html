@if(analysis$ | async; as data){
<div class="w-full space-y-6">
  <!-- Main Stats Grid -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
    <!-- Daily Hours Card -->
    <mat-card
      class="w-full transform transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
      appearance="outlined"
      @fadeSlideInOut
    >
      <mat-card-content class="p-6">
        <div class="w-full flex items-center justify-between">
          <div class="space-y-1">
            <p class="text-sm font-medium text-gray-600">Average Daily Hours</p>
            <h6 class="text-2xl font-bold">
              {{
                data.averageDailyHours
                  ? (data.averageDailyHours | humanize : 'hour')
                  : 'Not Work'
              }}
            </h6>
          </div>
          <mat-icon
            class="h-6 w-6 text-gray-600 transition-all cursor-pointer duration-300 hover:text-blue-500 hover:scale-110"
            >schedule</mat-icon
          >
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Most Productive Day Card -->
    <mat-card
      class="w-full transform transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
      appearance="outlined"
      @fadeSlideInOut
    >
      <mat-card-content class="p-6">
        <div class="w-full flex items-center justify-between">
          <div class="space-y-1">
            <p class="text-sm font-medium text-gray-600">Most Productive Day</p>
            <h6 class="text-2xl font-bold">
              {{
                data.mostProductiveDay
                  ? (data.mostProductiveDay | date)
                  : 'Not found üôÇ‚Äç‚ÜîÔ∏è'
              }}
            </h6>
          </div>
          <mat-icon
            class="h-6 w-6 text-gray-600 transition-all cursor-pointer duration-300 hover:text-blue-500 hover:scale-110"
            >calendar_today</mat-icon
          >
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Productive Hours Card -->
    <mat-card
      class="w-full transform transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
      appearance="outlined"
      @fadeSlideInOut
    >
      <mat-card-content class="p-6">
        <div class="w-full flex items-center justify-between">
          <div class="space-y-1">
            <p class="text-sm font-medium text-gray-600">
              Peak Productivity Hours
            </p>
            <h6 class="flex gap-2 text-2xl font-bold">
              @if(data.mostProductiveHours.length) { @for (hour of
              data.mostProductiveHours; track hour; let i = $index) {
              <div
                @tagAnimation
                [style.animation-delay]="i * 100 + 'ms'"
                class="px-2 rounded-lg bg-blue-100 text-blue-800 font-medium"
              >
                {{ hour }}
              </div>
              } }@else { No Work }
            </h6>
          </div>
          <mat-icon
            matTooltip="Times when you're most efficient"
            class="h-6 w-6 text-gray-600 transition-all cursor-pointer duration-300 hover:text-blue-500 hover:scale-110"
            >bolt</mat-icon
          >
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Consistency Score Card -->
    <mat-card
      class="w-full transform transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
      appearance="outlined"
      @fadeSlideInOut
    >
      <mat-card-content class="p-6">
        <div class="w-full flex items-center justify-between">
          <div class="space-y-1 relative w-full">
            <p class="text-sm font-medium text-gray-600">Consistency Score</p>
            <h6 class="text-2xl font-bold">
              {{ data.consistencyScore || 0 | percent : '1.2-2' }}
            </h6>
            <div
              [class]="
                'w-fit whitespace-nowrap right-0 absolute w-full px-2 py-1 ml-auto rounded-lg text-white text-sm ' +
                getConsistencyColor(data.consistencyScore * 100)
              "
            >
              {{ getConsistencyLabel(data.consistencyScore * 100) }}
            </div>
          </div>
          <mat-icon
            matTooltip="How regular your work patterns are"
            class="h-6 w-6 text-gray-600 transition-all cursor-pointer duration-300 hover:text-blue-500 hover:scale-110"
            >bar_chart</mat-icon
          >
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
}
