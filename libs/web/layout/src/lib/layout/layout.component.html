<!-- layout.component.html -->
<mat-sidenav-container class="flex flex-col md:flex-row h-screen bg-gray-50">
  <mat-sidenav
    [mode]="isMobileView ? 'over' : 'side'"
    [(opened)]="isExpanded"
    class="sidenav bg-white border-gray-200 md:flex md:flex-col"
  >
    <!-- Header -->
    <div class="p-6 pr-2 border-b border-gray-200">
      <div class="flex items-center gap-2">
        <mat-icon
          matTooltip="Ever Capture"
          [matTooltipDisabled]="!isTablet"
          class="text-gray-700"
        >
          terminal
        </mat-icon>
        @if (!isTablet) {
        <span class="text-xl text-gray-700 font-semibold">Ever Capture</span>
        } @if (isMobileView) {
        <button mat-icon-button class="ml-auto" (click)="toggleSidenav()">
          <mat-icon>close</mat-icon>
        </button>
        }
      </div>
    </div>

    <!-- Mobile Date Picker -->
    @if (isMobileView) {
    <div class="px-2 py-4 border-b border-gray-200">
      <lib-date-picker></lib-date-picker>
    </div>
    }

    <!-- Navigation Menu -->
    <lib-sidebar class="flex-grow"></lib-sidebar>

    <!-- Command Section -->
    <div
      class="border-t p-4 flex flex-col items-center w-full gap-4 mt-auto border-gray-200"
    >
      <lib-start></lib-start>
    </div>

    <!-- <div class="border-t p-4 flex flex-col items-center w-full gap-4 mt-auto border-gray-200">
      <lib-copy-context matTooltip="Copy Context"></lib-copy-context>
    </div> -->
  </mat-sidenav>

  <!-- Main Content -->
  <mat-sidenav-content class="flex flex-col border-l">
    <!-- Search Header -->
    <header
      class="p-4 gap-4 flex items-center justify-start border-b border-gray-200 bg-white"
    >
      @if (!isExpanded) {
      <button mat-icon-button (click)="toggleSidenav()">
        <mat-icon>menu</mat-icon>
      </button>
      }
      <div class="w-full flex-shrink-1">
        <lib-search></lib-search>
      </div>
      @if (!isMobileView) {
      <div class="flex-shrink-0">
        <lib-date-picker></lib-date-picker>
      </div>
      }
      <div class="flex-shrink-0">
        <lib-notification-badge></lib-notification-badge>
      </div>
    </header>

    <!-- Content Area -->
    <div class="p-4 md:p-8">
      <!-- breadcrumb -->
      <lib-breadcrumb></lib-breadcrumb>
      <!-- Router outlet -->
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
