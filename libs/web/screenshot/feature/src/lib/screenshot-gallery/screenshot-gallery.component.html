@if (isAvailable$ | async) {
  <div
    libInfiniteScroll
    (scrolled)="moreScreenshots()"
    class="grid grid-cols-1 static md:grid-cols-2 lg:grid-cols-3 gap-4 pr-4 overflow-auto max-h-custom main"
  >
    @for (screenshot of screenshots$ | async; track screenshot.id) {
      <div class="stack-cards card">
        <lib-screenshot
          class="stack-cards__item"
          (selected)="selectScreenshot($event)"
          (click)="onView(screenshot)"
          [checked]="isSelected(screenshot) | async"
          [actionButtons]="cardButtons"
          [screenshot]="screenshot"
        ></lib-screenshot>
        @for (chunk of screenshot.chunks?.slice(0, 9); track chunk.id) {
          <lib-screenshot
            class="stack-cards__item"
            (selected)="selectScreenshot($event)"
            (click)="onView(chunk)"
            [actionButtons]="cardButtons"
            [checked]="isSelected(chunk) | async"
            [screenshot]="chunk"
          ></lib-screenshot>
        }
      </div>
    }
    @if (capturing$ | async) {
      <mat-card
        appearance="outlined"
        class="screenshot-card flex items-center justify-center p-8"
      >
        <mat-spinner diameter="48" class="text-gray-300"></mat-spinner>
      </mat-card>
    }
  </div>

  @if (size$ | async) {
    <div class="absolute inset-x-0 action-button-group">
      <lib-gallery-buttons-action
        [buttons]="galleryButtons"
        [size]="size$ | async"
        [data]="selectedScreenshots$ | async"
      ></lib-gallery-buttons-action>
    </div>
  }
} @else {
  <div class="flex h-full items-center p-4 justify-center">
    <lib-no-data
      message="No screenshots available"
      class="text-center text-gray-500"
    >
    </lib-no-data>
  </div>
}
