@let loading = loading$ | async;
@let cooldown = (cooldown$ | async) ?? 0;

<lib-auth-container
  title="Verify Your Email"
  subtitle="To continue using our service, please verify your email address."
>
  <div class="verification-content">
    <mat-icon class="verification-icon" color="primary"
      >mark_email_read</mat-icon
    >

    <p class="verification-message">
      We've generated a verification link. Please wait the link to verify your
      account.
    </p>

    <p class="verification-note">
      Didn't generated verification link? Request a new verification link below.
    </p>

    <button
      mat-flat-button
      color="primary"
      (click)="verify()"
      [disabled]="loading || cooldown > 0"
    >
      <div class="verify-btn">
        @if (loading) {
          <mat-icon class="spinner-icon"
            ><mat-spinner diameter="20"></mat-spinner
          ></mat-icon>
          Generating..
        } @else if (cooldown > 0) {
          <mat-icon class="animate-hourglass">hourglass_empty</mat-icon>
          Regenerate in {{ cooldown }}s
        } @else {
          <mat-icon>send</mat-icon>
          Regenerate verification link
        }
      </div>
    </button>

    <div class="actions">
      <button mat-button color="primary" (click)="backToLogin()">
        Back to Login
      </button>
    </div>
  </div>
</lib-auth-container>
